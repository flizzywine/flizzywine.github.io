# 易经与小六壬查询工具

一个现代化的传统占卜查询网站，基于 GitHub Pages 部署。

🔗 **在线访问**: https://flizzywine.github.io

## ✨ 功能特性

### 🔮 易经六十四卦查询
- 输入上卦、下卦数字（1-8）和动爻（1-6）
- 查询完整卦象信息：
  - 卦名与卦象结构
  - 卦辞、彖传、大象传
  - **动爻优先显示**：卦名 爻名动：爻辞。象曰：象传
  - 全卦六爻详解

### 🐉 小六壬九宫系统
- 输入月日时或任意三个数字
- **九宫算法**：first=(n1-1)%9, second=(n1+n2-2)%9, third=(n1+n2+n3-3)%9
- **九个神煞**：大安、留连、速喜、赤口、小吉、空亡、病符、桃花、天德
- **三段式输出**：结果1 → 结果2 → 结果3（初段、中段、末段）
- 每个结果包含：八卦、五行、详细断辞

### 🎨 设计特点
- 中国风 UI 设计，古典与现代结合
- 响应式布局，支持手机、平板、桌面
- **动爻渐变色背景**：突出显示核心信息
- 流畅的动画效果
- 清晰的信息层级

## 📁 文件结构

```
.
├── index.html          # 主页面（单文件应用）
├── app.js              # JavaScript 逻辑
├── data.js             # 六十四卦数据
├── data.json           # 原始数据备份
├── tests/
│   └── zhouyi.spec.js  # Playwright 自动化测试（14个测试用例）
├── playwright.config.js # Playwright 配置文件
├── package.json        # 项目配置与测试依赖
└── README.md           # 项目说明
```

## 🚀 本地运行

### 运行网站
由于这是一个纯静态网站，直接在浏览器中打开 `index.html` 即可：

```bash
# 方式1：直接打开
open index.html

# 方式2：使用 Python 本地服务器
python3 -m http.server 8080
# 然后访问 http://localhost:8080

# 方式3：使用 Node.js 的 npx
npx serve .
```

### 运行自动化测试

项目使用 Playwright 编写了 14 个测试用例，覆盖：
- 页面基础功能测试
- 易经卦象查询测试（乾卦、泰卦、复卦等）
- 小六壬九宫计算测试
- 响应式布局测试

```bash
# 安装依赖
npm install

# 运行所有测试
npm test

# 运行带 UI 的测试
npm run test:ui

# 调试模式运行
npm run test:debug

# 有界面模式运行
npm run test:headed
```

## 📝 数据来源

- **易经数据**：基于《周易》原文整理
- **包含内容**：
  - 六十四卦卦辞、彖传、大象传
  - 三百八十四爻的爻辞与小象传
  - 卦象结构（上卦、下卦）

## 🛠️ 技术栈

- **HTML5**: 语义化结构
- **Tailwind CSS**: CDN 引入，无需构建
- **Vanilla JavaScript**: 原生 JS，无框架依赖
- **Google Fonts**: Noto Serif SC（正文）+ Ma Shan Zheng（书法标题）
- **Playwright**: 端到端自动化测试框架

## 🎯 使用说明

### 易经查询
1. 在「上卦数字」输入 1-8 的数字（1=乾, 2=兑, 3=离...）
2. 在「下卦数字」输入 1-8 的数字
3. 在「动爻」输入 1-6 的数字（从下到上）
4. 点击「查询卦象」按钮

**示例**: 上卦1（乾）+ 下卦8（坤）+ 动爻3 = 泰卦三爻动

### 小六壬九宫
1. 输入月、日、时（或任意三个正整数）
2. 点击「起卦推算」
3. 查看三段式九宫结果：**结果1 → 结果2 → 结果3**
4. 每个结果包含八卦、五行、详细断辞

**九宫算法说明**：
- 初段：`(n1 - 1) % 9`
- 中段：`(n1 + n2 - 2) % 9`
- 末段：`(n1 + n2 + n3 - 3) % 9`

**九个神煞**：大安(木)、留连(木)、速喜(火)、赤口(金)、小吉(水)、空亡(土)、病符(金)、桃花(土)、天德(金)

## 🔧 自定义配置

### 修改样式
编辑 `index.html` 中的 Tailwind 配置：
```javascript
tailwind.config = {
    theme: {
        extend: {
            colors: {
                'gua-red': '#8B0000',    // 修改主色
                'gua-gold': '#C9A227',   // 修改金色
                // ...
            }
        }
    }
}
```

### 添加数据
编辑 `data.js`，按以下格式添加卦象数据：
```javascript
const guaDatabase = {
    "卦名": {
        "上卦": "卦名",
        "下卦": "卦名",
        "卦辞": "...",
        "彖辞": "...",
        "大象辞": "...",
        "爻辞初爻": "...",
        "小象传1爻": "...",
        // ...
    }
};
```

## 📱 移动端适配

网站完全响应式，在手机上：
- 自动调整为单列布局
- 输入框增大便于触摸
- 字号自适应屏幕

## 🌐 部署到 GitHub Pages

1. Fork 本仓库或创建新仓库
2. 将代码推送到 `main` 分支
3. 在仓库设置中启用 GitHub Pages
4. 选择部署来源为 `main` 分支
5. 访问 `https://你的用户名.github.io/仓库名`

## 📄 许可证

MIT License - 自由使用和修改

## 🙏 致谢

- 周易原文参考：《周易正义》《周易集解》
- 字体：Google Fonts（Noto Serif SC, Ma Shan Zheng）
- 设计灵感：传统中式美学

---

Made with ❤️ by @flizzywine
